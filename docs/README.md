# VitePress API æ–‡æ¡£ä½¿ç”¨æŒ‡å—

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
docs/
â”œâ”€â”€ src/                       # å½“å‰/æœ€æ–°ç‰ˆæœ¬çš„æ–‡æ¡£
â”‚   â”œâ”€â”€ index.md              # é¦–é¡µ
â”‚   â”œâ”€â”€ api/                  # APIæ–‡æ¡£ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”‚   â”œâ”€â”€ zj_humanoid_ros_api.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ demos/                # å¼€å‘ç¤ºä¾‹
â”‚   â”œâ”€â”€ tools/                # è°ƒè¯•å¼€å‘å·¥å…·
â”‚   â””â”€â”€ images/               # å›¾ç‰‡èµ„æº
â”œâ”€â”€ versions/                  # å½’æ¡£çš„æ—§ç‰ˆæœ¬æ–‡æ¡£
â”‚   â””â”€â”€ README.md             # ç‰ˆæœ¬ç®¡ç†è¯´æ˜
â””â”€â”€ .vitepress/               # VitePressé…ç½®
    â”œâ”€â”€ config.ts             # é…ç½®æ–‡ä»¶ï¼ˆå·²é…ç½®ç‰ˆæœ¬ç®¡ç†ï¼‰
    â””â”€â”€ theme/
        â””â”€â”€ custom.css        # è‡ªå®šä¹‰æ ·å¼
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
npm install
```

### 2. ç”ŸæˆAPIæ–‡æ¡£

åœ¨æ›´æ–° `api_struct/zj_humanoid/` ä¸‹çš„æ¥å£åï¼Œéœ€è¦é‡æ–°ç”Ÿæˆæ–‡æ¡£ï¼š

```bash
# ç”ŸæˆYAMLæ±‡æ€»æ–‡ä»¶
cd api_struct/scripts
python3 generate_whole_yaml.py

# ç”ŸæˆVitePressæ–‡æ¡£
python3 generate_vitepress_docs.py
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
npm run docs:dev
```

è®¿é—® http://localhost:5173/zj_humanoid_sdk_ros/ æŸ¥çœ‹æ–‡æ¡£

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run docs:build
```

æ„å»ºäº§ç‰©åœ¨ `.vitepress/dist/` ç›®å½•

### 5. é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

```bash
npm run docs:preview
```

## ğŸ“– æ–‡æ¡£é¡µé¢è¯´æ˜

### é¦–é¡µ (`/`)
- é¡¹ç›®ä»‹ç»
- å¿«é€Ÿå¯¼èˆªé“¾æ¥
- åŠŸèƒ½ç‰¹æ€§å±•ç¤º

### å®Œæ•´APIæ–‡æ¡£ (`/api/zj_humanoid_ros_api`)
- æ‰€æœ‰Serviceså’ŒTopicsçš„å®Œæ•´åˆ—è¡¨
- æŒ‰å­ç³»ç»Ÿåˆ†ç»„æ˜¾ç¤º
- åŒ…å«ç»Ÿè®¡ä¿¡æ¯

### å­ç³»ç»Ÿæ–‡æ¡£ (`/api/subsystems/{subsystem}`)
- æ¯ä¸ªå­ç³»ç»Ÿçš„ç‹¬ç«‹é¡µé¢
- åŒ…å«è¯¥å­ç³»ç»Ÿçš„æ‰€æœ‰Serviceså’ŒTopics
- ä¾¿äºå¿«é€ŸæŸ¥æ‰¾ç‰¹å®šå­ç³»ç»Ÿçš„æ¥å£

## ğŸ”„ æ›´æ–°æ–‡æ¡£æµç¨‹

1. **ä¿®æ”¹æ¥å£å®šä¹‰**
   - ç¼–è¾‘ `api_struct/zj_humanoid/` ä¸‹çš„ `service.yaml` æˆ– `topic.yaml`

2. **é‡æ–°ç”Ÿæˆæ–‡æ¡£**
   ```bash
   cd api_struct/scripts
   python3 generate_whole_yaml.py      # ç”ŸæˆYAMLæ±‡æ€»
   python3 generate_vitepress_docs.py  # ç”ŸæˆVitePressæ–‡æ¡£
   ```

3. **æŸ¥çœ‹æ›´æ–°**
   - å¼€å‘æœåŠ¡å™¨ä¼šè‡ªåŠ¨çƒ­é‡è½½
   - åˆ·æ–°æµè§ˆå™¨å³å¯çœ‹åˆ°æ›´æ–°

## ğŸ¨ è‡ªå®šä¹‰æ ·å¼

æ ·å¼æ–‡ä»¶ä½äº `docs/.vitepress/theme/custom.css`ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š
- è¡¨æ ¼æ ·å¼
- æ ‡é¢˜æ ·å¼
- ä»£ç å—æ ·å¼
- ç»Ÿè®¡å¡ç‰‡æ ·å¼

## ğŸ“ ä¾§è¾¹æ é…ç½®

ä¾§è¾¹æ é…ç½®åœ¨ `docs/.vitepress/config.ts` ä¸­ï¼Œå¯ä»¥ï¼š
- æ·»åŠ æ–°çš„å¯¼èˆªé¡¹
- è°ƒæ•´èœå•é¡ºåº
- ä¿®æ”¹èœå•å›¾æ ‡å’Œæ–‡å­—

## ğŸŒ éƒ¨ç½²

### GitHub Pagesï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰

é¡¹ç›®å·²é…ç½® GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼š

1. **è‡ªåŠ¨è§¦å‘**ï¼šå½“ä»£ç æ¨é€åˆ° `main` åˆ†æ”¯æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ï¼š
   - ç”Ÿæˆåˆå¹¶çš„ YAML æ–‡ä»¶ï¼ˆè¿è¡Œ `generate_whole_yaml.py`ï¼‰
   - ç”Ÿæˆ API æ–‡æ¡£ï¼ˆè¿è¡Œ `generate_vitepress_docs.py`ï¼‰
   - æ„å»º VitePress ç«™ç‚¹
   - éƒ¨ç½²åˆ° GitHub Pages

2. **è®¿é—®åœ°å€**ï¼šéƒ¨ç½²å®Œæˆåï¼Œæ–‡æ¡£ä¼šè‡ªåŠ¨å‘å¸ƒåˆ°ï¼š
   ```
   https://zj-humanoid.github.io/zj_humanoid_sdk_ros/
   ```

### æœ¬åœ°æ„å»º

å¦‚æœéœ€è¦æœ¬åœ°æ„å»ºæµ‹è¯•ï¼š

```bash
# ç”Ÿæˆåˆå¹¶çš„ YAML æ–‡ä»¶
cd api_struct/scripts
python3 generate_whole_yaml.py

# ç”Ÿæˆ API æ–‡æ¡£
python3 generate_vitepress_docs.py

# æ„å»º VitePress ç«™ç‚¹
cd ../../..
npm run docs:build

# æ„å»ºè¾“å‡ºåœ¨ dist/ ç›®å½•
```

**æ³¨æ„**ï¼šæ„å»ºè¾“å‡ºç›®å½•æ˜¯é¡¹ç›®æ ¹ç›®å½•çš„ `dist/` æ–‡ä»¶å¤¹ï¼Œä¸æ˜¯ `.vitepress/dist/`ã€‚

### å…¶ä»–å¹³å°

æ„å»ºåçš„é™æ€æ–‡ä»¶å¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ï¼š
- Netlify
- Vercel
- Cloudflare Pages
- ç­‰

## ğŸ“¦ ç‰ˆæœ¬ç®¡ç†

é¡¹ç›®å·²é…ç½®ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ï¼Œ**ä¸ Git æ ‡ç­¾/åˆ†æ”¯è‡ªåŠ¨å…³è”**ï¼Œæ”¯æŒç»´æŠ¤å¤šä¸ªç‰ˆæœ¬çš„æ–‡æ¡£ï¼š

### âœ¨ ä¸ Git é›†æˆ

ç‰ˆæœ¬ç®¡ç†å·²ä¸ Git æ ‡ç­¾å’Œåˆ†æ”¯é›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–ï¼š

- **Git æ ‡ç­¾è‡ªåŠ¨å½’æ¡£**ï¼šåˆ›å»ºç‰ˆæœ¬æ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨å½’æ¡£å½“å‰æ–‡æ¡£
- **è‡ªåŠ¨åŒæ­¥**ï¼šGitHub Actions è‡ªåŠ¨ä»æ ‡ç­¾æå–ç‰ˆæœ¬æ–‡æ¡£
- **ç‰ˆæœ¬åˆ‡æ¢å™¨**ï¼šåœ¨å¯¼èˆªæ å¯ä»¥çœ‹åˆ°"ç‰ˆæœ¬"åˆ‡æ¢å™¨ï¼Œæ˜¾ç¤ºæ‰€æœ‰å·²å‘å¸ƒçš„ç‰ˆæœ¬

### å¿«é€Ÿå¼€å§‹

**å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ˆæ¨èï¼‰**ï¼š
```bash
# 1. æ›´æ–°æ–‡æ¡£å¹¶æäº¤
git add docs/src/
git commit -m "docs: update for v2.0.0"
git push origin main

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆè‡ªåŠ¨è§¦å‘å½’æ¡£ï¼‰
git tag v2.0.0
git push origin v2.0.0
# GitHub Actions ä¼šè‡ªåŠ¨å½’æ¡£å¹¶éƒ¨ç½²
```

**æ‰‹åŠ¨åŒæ­¥ç‰ˆæœ¬**ï¼š
```bash
# åŒæ­¥æ‰€æœ‰ Git æ ‡ç­¾å¯¹åº”çš„ç‰ˆæœ¬
npm run docs:sync-versions

# ä»ç‰¹å®šæ ‡ç­¾åˆ›å»ºç‰ˆæœ¬
npm run docs:sync-version:tag v1.0.0

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬
npm run docs:get-versions
```

### ç‰ˆæœ¬å‘½å

- **Git æ ‡ç­¾æ ¼å¼**ï¼š`v1.0.0`, `v2.1.0`ï¼ˆæ¨èè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
- **ç‰ˆæœ¬ç›®å½•**ï¼šè‡ªåŠ¨å»é™¤ `v` å‰ç¼€ï¼ˆ`v1.0.0` â†’ `1.0.0`ï¼‰
- **æ˜¾ç¤ºåç§°**ï¼šåœ¨ç‰ˆæœ¬åˆ‡æ¢å™¨ä¸­æ˜¾ç¤ºä¸º `v1.0.0`, `v2.1.0` ç­‰

### è¯¦ç»†è¯´æ˜

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š[ç‰ˆæœ¬ç®¡ç†è¯¦ç»†è¯´æ˜](./versions/README.md)

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ–‡æ¡£æ²¡æœ‰æ›´æ–°ï¼Ÿ
A: ç¡®ä¿å·²è¿è¡Œ `generate_vitepress_docs.py` é‡æ–°ç”Ÿæˆæ–‡æ¡£

### Q: æ ·å¼æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ
A: æ£€æŸ¥ `custom.css` æ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Œå¯èƒ½éœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨

### Q: ä¾§è¾¹æ é“¾æ¥404ï¼Ÿ
A: æ£€æŸ¥ `config.ts` ä¸­çš„é“¾æ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨

### Q: ç‰ˆæœ¬åˆ‡æ¢å™¨ä¸æ˜¾ç¤ºï¼Ÿ
A: ç¡®ä¿å·²å®‰è£… `@viteplus/versions` æ’ä»¶ï¼Œå¹¶æ£€æŸ¥ `config.ts` ä¸­çš„ `versionsConfig` é…ç½®

## ğŸ“š ç›¸å…³æ–‡ä»¶

- **ç”Ÿæˆè„šæœ¬**: `api_struct/scripts/generate_vitepress_docs.py`
- **é…ç½®æ–‡ä»¶**: `docs/.vitepress/config.ts`
- **æ ·å¼æ–‡ä»¶**: `docs/.vitepress/theme/custom.css`
- **æ•°æ®æº**: `api_struct/generated/zj_humanoid_interfaces.yaml`

